<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Evaluacion_subreport" language="groovy" pageWidth="520" pageHeight="572" orientation="Landscape" columnWidth="520" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="e91808fc-d38f-407f-ac70-aef9b023aae6">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="pIrespuestaA" class="java.lang.Integer"/>
	<parameter name="idCuestionario" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[select c.descripcion,
       p.pregunta,
       r.id_respuesta,
       r.respuesta,
       r.estado,
       ca.id_c_alumno,
       COALESCE(ra.id_respuesta, ra.id_respuesta, 0)  as id_respuesta2,
       CASE WHEN (r.estado = 1 and r.id_respuesta = ra.id_respuesta) THEN 'Correcto' ELSE 'Incorrecto' END as calificacion
from c_cuestionario c
INNer JOIN  preguntas_cuestionario p on c.id_cuestionario = p.id_cuestionario
INNER JOIN respuestas_cuestionario r ON r.id_fk = p.id
INNER JOIN c_cuestionario_alumno ca ON ca.id_cuestionario = c.id_cuestionario
INNER JOIN respuestas_alumno ra ON  ra.id_c_alumno = ca.id_c_alumno and ra.id_respuesta = r.id_respuesta and ra.id_respuesta=$P{pIrespuestaA}
WHERE c.id_cuestionario = $P{idCuestionario}
ORDER BY  p.pregunta, r.id_respuesta]]>
	</queryString>
	<field name="descripcion" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="pregunta" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id_respuesta" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="respuesta" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="estado" class="java.lang.Boolean">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id_c_alumno" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id_respuesta2" class="java.lang.Long"/>
	<field name="calificacion" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="22" splitType="Stretch">
			<staticText>
				<reportElement uuid="87729060-753b-44df-bca4-447cdbb48c4b" x="0" y="0" width="100" height="20"/>
				<textElement/>
				<text><![CDATA[Tu Respuesta:]]></text>
			</staticText>
			<textField>
				<reportElement uuid="38ea3fa7-8a2f-461c-84d5-79b0a4212a57" x="100" y="0" width="307" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{respuesta}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="156a13e4-065f-4cee-aa1b-d530a00ec84f" x="407" y="0" width="100" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{calificacion}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
